name: æ¯æ—¥å¤©æ°”æ¨é€

on:
  schedule:
    # æ¯å¤©åŒ—äº¬æ—¶é—´æ—©ä¸Š 07:00 è¿è¡Œ
    # (GitHub ç”¨çš„æ˜¯ UTC æ—¶é—´ï¼ŒåŒ—äº¬æ˜¯ UTC+8ï¼Œæ‰€ä»¥ 07:00 - 8 = 23:00 å‰ä¸€å¤©)
    - cron: '0 23 * * *'
  
  # å…è®¸ä½ æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®æ¥æµ‹è¯• (Workflow Dispatch)
  workflow_dispatch:

jobs:
  send-weather:
    runs-on: ubuntu-latest # ä½¿ç”¨æœ€æ–°çš„ Ubuntu è™šæ‹Ÿæœº
    
    steps:
      - name: ğŸ“¥ æ‹‰å–ä»£ç 
        uses: actions/checkout@v3
      
      - name: ğŸ è®¾ç½® Python ç¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
          
      - name: ğŸ“¦ å®‰è£…ä¾èµ–åº“
        run: |
          pip install requests beautifulsoup4
          
      - name: ğŸš€ è¿è¡Œå¤©æ°”è„šæœ¬
        env:
          # æŠŠâ€œä¿é™©ç®±â€é‡Œçš„å¯†ç æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡é‡Œ
          MAIL_USER: ${{ secrets.MAIL_USER }}
          MAIL_PASS: ${{ secrets.MAIL_PASS }}
          QWEATHER_KEY: ${{ secrets.QWEATHER_KEY }}
        run: python weather_bot.py
